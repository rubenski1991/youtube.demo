/*!CK:3467069756!*//*1401170298,178134343*/

if (self.CavalryLogger) { CavalryLogger.start_js(["00LG1"]); }

__d("ZoomProfilePicCropViewer.react",["ArbiterMixin","BasicVector","ProfilePicCropViewerStrings","ProfilePictureFlowLogging","ProfilePicCropViewerMixin","React","SpotlightProfilePicCropOptions","SpotlightViewerCoreMixin","SpotlightViewerDimensionMixin","XUIButton.react","XUIDialog.react","XUIDialogFooter.react","XUIGrayText.react","ZoomCrop.react","cx","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w="_3mdr",x=580,y=460,z=new h(x,y),aa=l.createClass({displayName:'ZoomProfilePicCropViewer',mixins:[g,k,n,o],propTypes:{profileID:l.PropTypes.string.isRequired,setid:l.PropTypes.string.isRequired,uploading:l.PropTypes.bool,warnOnCancel:l.PropTypes.bool},getInitialState:function(){return {open:true,photoData:null,updatingPhoto:false,savingMode:false};},render:function(){var ba,ca,da,ea=this.state.photoData,fa,ga=(("_3mds")+(!this.state.photoData?' '+"_3mdt":''));if(!ea){ca="Loading...";}else if(ea.previousprofilepic){ca="You've used this photo as your profile picture before. Do you want to use it again?";fa=this.getDimensions().getImageDimensionsForStage({x:ea.image1.width,y:ea.image1.height},z);da=l.DOM.img({className:"_3mdu",height:fa.y,src:ea.image1.uri,width:fa.x});}else{ca=i.ZOOMCROP_INSTRUCTIONS;fa=new h(ea.original.width,ea.original.height);var ha=m.getOptionsAsRatio(ea,fa);da=t({center:ha.center,cropSizeRatio:ha.size,imageSize:fa,ref:"image",src:ea.original.uri});}if(this.state.savingMode){ba=s({className:w,shade:"medium",weight:"bold"},i.CROP_SAVING);}else if(ea){ba=[p({label:i.BUTTON_CANCEL,onClick:this.handleCancel}),p({label:i.BUTTON_SAVE,onClick:this.handleSave,use:"confirm"})];}else if(this.props.uploading)ba=s({className:w,shade:"medium",weight:"bold"},i.UPLOADING);return (q({className:"_3mdv",layerHideOnBlur:false,modal:true,shown:true,width:x},l.DOM.div({className:"_3mdw"},s({display:"block",shade:"medium",size:"medium",weight:"bold"},i.CROP_AND_SAVE),s({display:"block",shade:"medium",size:"small"},ca)),l.DOM.div({className:ga},da),r({leftContent:s({className:w,shade:"medium"},i.PROFILE_PIC_VISIBILITY)},ba)));},getCropArea:function(){return this.refs.image.getDimensions().getArea();},getFlowType:function(){return j.flow.ZOOMCROP;}});e.exports=aa;},null);