/*!CK:1061149732!*//*1401162444,178198827*/

if (self.CavalryLogger) { CavalryLogger.start_js(["9OQ08"]); }

__d("CalendarUI",["Event","Arbiter","AsyncRequest","CSS","DOM","DOMQuery","DOMScroll","Hovercard","Parent","Run","ScrollAwareDOM","Style","UIPagelet","Vector","ViewportBounds","$","copyProperties","ge","goURI"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){function z(){}w(z,{EVENT_ACTION:'EVENT_ACTION',SUGGESTIONS_LOADED:'SUGGESTIONS_LOADED',HIDE_SUGGESTED_EVENT:'HIDE_SUGGESTED_EVENT',_todayButton:null,_todayElement:null,_registeredReminders:false,init:function(){h.subscribe(this.EVENT_ACTION,function(ba,ca){s.loadFromEndpoint('CalendarHeaderPagelet','pagelet_calendar_header',JSON.parse(ca.actioncontext));if(x('pagelet_calendar_invites'))s.loadFromEndpoint('CalendarInvitesPagelet','pagelet_calendar_invites',JSON.parse(ca.actioncontext));});var aa=u.addTop(function(){var ba=x('pagelet_calendar_header');if(ba&&r.isFixed(ba.firstChild)){var ca=ba.firstChild.getBoundingClientRect();return ca.bottom;}return 0;});p.onLeave(function(){aa.remove();});},initGridItem:function(aa,ba){g.listen(aa,'click',function(event){if(o.byTag(event.getTarget(),'a'))return;i.bootstrap(ba,aa.firstChild);return;});},initGridItemList:function(aa,ba,ca){h.subscribe(this.SUGGESTIONS_LOADED,function(da,ea){if(ba==ea.timestamp)for(var fa=0;fa<ca&&fa<ea.content.length;fa++)k.appendContent(aa,ea.content[fa]);});},initScrollItem:function(aa,ba){g.listen(aa,'click',this.scrollTo.bind(this,ba));},scrollTo:function(aa,ba){aa=l.isNode(aa)?aa:x(aa);var ca=0;if(aa){var da=t.getElementPosition(v('fbCalendarWrapper')).y,ea=t.getElementPosition(aa).y;ca=ea-da;}else ca=t.getElementPosition(v('bottomContent')).y;m.scrollTo(new t(0,ca,'document'),ba!==false);},initUnhide:function(aa,ba){g.listen(aa,'click',function(event){var ca=o.byClass(ba,'fbCalendarItem');k.remove(ba);j.removeClass(k.find(ca,'.fbHiddenCalendarItem'),'fbHiddenCalendarItem');});},registerHomepageReminders:function(){if(!this._registeredReminders){h.subscribe(this.EVENT_ACTION,function(aa,ba){if(x('pagelet_reminders'))s.loadFromEndpoint('RemindersPagelet','pagelet_reminders');});this._registeredReminders=true;}},registerTodayClickHandler:function(){this._todayButton.onclick=null;g.listen(this._todayButton,'click',this.scrollTo.bind(this,this._todayElement));},registerTodayElement:function(aa){this._todayElement=l.isNode(aa)?aa:x(aa);this._todayButton&&this.registerTodayClickHandler();},registerTodayButton:function(aa){this._todayButton=aa;this._todayElement&&this.registerTodayClickHandler();},registerEventLink:function(aa,ba){h.subscribe(this.EVENT_ACTION,function(ca,da){if(da.eid===ba){var ea=l.scry(v("facebook"),".fbCalendarSuggestedLabel");if(ea.length>0)j.addClass(ea[0],"hidden_elem");switch(da.action){case 'GOING':j.removeClass(aa.parentNode,"hidden_elem");j.removeClass(aa,"fbCalendarEventSuggested");j.addClass(aa,"fbCalendarEventGoing");break;case 'MAYBE':j.removeClass(aa.parentNode,"hidden_elem");j.removeClass(aa,"fbCalendarEventSuggested");j.removeClass(aa,"fbCalendarEventGoing");break;case 'DECLINED':case 'HIDDEN':n.hide(true);j.addClass(aa.parentNode,"hidden_elem");break;case 'EDITED':if(da.name)k.setContent(aa,da.name);if(da.day){var fa=x("pagelet_calendar_day_"+da.day);if(fa){var ga=l.find(fa,".fbCalendarGridEventList");if(l.scry(ga,"li").length>=4){j.addClass(aa.parentNode,"hidden_elem");s.loadFromEndpoint("CalendarDayPagelet","pagelet_calendar_day_"+da.day,{day:da.timestamp});}else k.prependContent(ga,aa.parentNode);}else j.addClass(aa.parentNode,"hidden_elem");}break;}}});},informEventGoing:function(aa,ba){h.inform(this.EVENT_ACTION,{eid:aa,action:'GOING',actioncontext:ba});},informEventMaybe:function(aa,ba){h.inform(this.EVENT_ACTION,{eid:aa,action:'MAYBE',actioncontext:ba});},informEventDeclined:function(aa,ba){h.inform(this.EVENT_ACTION,{eid:aa,action:'DECLINED',actioncontext:ba});},informEventHidden:function(aa,ba){h.inform(this.EVENT_ACTION,{eid:aa,action:'HIDDEN',actioncontext:ba});},informEventEdited:function(aa,ba,ca,da){h.inform(this.EVENT_ACTION,{eid:aa,action:'EDITED',name:ba,day:ca,timestamp:da});},informSuggestionsAdded:function(aa,ba){h.inform(this.SUGGESTIONS_LOADED,{timestamp:aa,content:ba});},removeCalendarListHeader:function(aa){var ba=k.scry(aa,"^.fbCalendarOverlay .fbCalendarItem"),ca=k.find(aa,"^.fbCalendarItem");if(ba.length==1)ca=k.find(aa,"^.fbCalendarOverlay");k.remove(ca);},reloadPage:function(){y(window.location);},unhide:function(aa){setTimeout(function(){q.monitor(aa.nextSibling,j.show.bind(null,aa));},0);}});e.exports=z;},null);
__d("GiftOpportunityLogger",["AsyncRequest","Event"],function(a,b,c,d,e,f,g,h){var i={init:function(k,l,m){var n=false;h.listen(k,'click',function(o){if(n)return true;n=true;i.send(l,m);});},send:function(k,l){if(j[k.opportunity_id])return;j[k.opportunity_id]=true;return new g().setURI('/ajax/gifts/log/opportunity').setData({data:k,entry_point:l}).send();}},j={};e.exports=i;},null);
__d("AppRequestReminders",["AsyncRequest","CSS","DOM","ge"],function(a,b,c,d,e,f,g,h,i,j){var k=0,l={},m=1,n=j('OtherAppReqReminder'),o=function(u,v,w){l[v]={node:u,seq:m++,reqCount:w};},p=function(u){k=u;},q=function(u){return u.id.split('_')[1];},r=function(u){var v=j(u),w=v.nextSibling;if(w!==n){h.show(w);k-=l[q(w)].reqCount;}s(k);},s=function(u){new g().setURI('/ajax/reminders/update_count.php').setData({new_count:u}).setMethod('POST').send();},t=function(u,v){if(n&&v&&u>0){i.setContent(j('OtherAppReqLabel'),v);}else if(n){h.hide(n);}else h.hide(j('OtherAppReqReminder'));};f.initNode=o;f.handleRemove=r;f.updateCount=t;f.setTotalOtherCount=p;},null);
__d("FlexibleScrollableArea",["DataStore","DOM","DOMDimensions","Event","Parent","Run","Style","Vector","throttle"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p=30,q=100;function r(s,t,u,v,w){"use strict";this._element=s;this._tight=t;this._measureFrom=u;this._minHeight=v;this._margin=w;g.set(this._element,'FlexibleScrollableArea',this);l.onLeave(this.cleanup.bind(this));this._listener=j.listen(window,'resize',o(this.poke,q,this));this.poke();}r.prototype.poke=function(){"use strict";var s=h.find(this._element,'.uiScrollableAreaBody'),t=n.getElementDimensions(s).y+i.measureElementBox(s,'height',true,true,true),u;if(this._tight){var v=this.getMaxHeight();if(t<v+p)v+=p;u=Math.max(Math.min(t,v),this._minHeight);}else u=Math.max(this.getMaxHeight(),this._minHeight);m.set(this._element,'height',u+'px');};r.prototype.getMaxHeight=function(){"use strict";if(this._measureFrom==='bottom'){var s=n.getViewportDimensions().y,t=n.getElementPosition(this._element,'viewport').y,u=s-t;return u-this._margin;}var v=n.getElementPosition(this._element,'viewport').y+n.getElementDimensions(this._element).y;return v-this._margin;};r.prototype.cleanup=function(){"use strict";this._listener&&this._listener.remove();};r.getInstance=function(s){"use strict";var t=k.byClass(s,'flexibleScrollableArea');return t?g.get(t,'FlexibleScrollableArea'):null;};e.exports=r;},null);
__d("RequestListController",["Arbiter","ChannelConstants","CSS","DOM"],function(a,b,c,d,e,f,g,h,i,j){function k(l){"use strict";this.$RequestListController0=l;this.$RequestListController1=0;this.$RequestListController2={};g.subscribe(h.getArbiterType('jewel_requests_remove_old'),this.$RequestListController3.bind(this));this.fromDom();}k.prototype.$RequestListController4=function(l){"use strict";var m=l.match(/^(\d+)_(\d+)/);return (m)?{requester:m[1],type:m[2]}:undefined;};k.prototype.$RequestListController5=function(l){"use strict";var m=l?this.$RequestListController4(l):undefined,n;if(m&&m.requester){n=parseInt(m.requester,10);if(isNaN(n))n=undefined;}var o;if(m&&m.type){o=parseInt(m.type,10);if(isNaN(o))o=undefined;}return {requester:n,type:o};};k.prototype.fromDom=function(){"use strict";j.scry(this.$RequestListController0,'.fbRequestList li.objectListItem').forEach(function(l){var m=l.getAttribute('id');if(m){var n=this.$RequestListController5(m);if(n.requester)this.$RequestListController2[n.requester]={id:m,item:l};++this.$RequestListController1;}}.bind(this));this.$RequestListController6();};k.prototype.$RequestListController3=function(l,m){"use strict";var n=this.$RequestListController2[m.obj.from];if(n){j.remove(n.item);delete this.$RequestListController2[m.obj.from];--this.$RequestListController1;this.$RequestListController6();}};k.prototype.$RequestListController6=function(){"use strict";j.scry(this.$RequestListController0,'li.empty').forEach(function(l){i.conditionShow(l,this.$RequestListController1<=0);}.bind(this));};e.exports=k;},null);
__d("LikeAllLink",["Event","AsyncRequest"],function(a,b,c,d,e,f,g,h){var i={init:function(j,k){g.listen(j,'click',function(){new h('/ajax/reminders/like_all.php').setData({page_ids:k,origin:'reminder_box_invite_like_all'}).send();});}};e.exports=i;},null);
__d("LoadRecommendations",["Event","AsyncRequest"],function(a,b,c,d,e,f,g,h){var i={loadOnClick:function(j){g.listen(j,'click',function(){new h().setURI('/ajax/pages/reminder/recommendations').send();});}};e.exports=i;},null);
__d("ReminderStory",["AsyncRequest","Arbiter","DOMQuery","Event","FlexibleScrollableArea","LayerAutoFocus","ScrollableArea","SubscriptionsHandler","UIPagelet","endsWith","getActiveElement"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(s,t,u,v){"use strict";this.$ReminderStory0=false;j.listen(s,'click',function(){t.show();if(u)new g('/growth/reminder/logging.php').setData({context_data:u,first_click:!this.$ReminderStory0}).send();this.$ReminderStory0=true;}.bind(this));if(v)t.subscribeOnce('show',function(){o.loadFromEndpoint(v,t.getContent());});t.disableBehavior(l);t.subscribe('aftershow',function(){var w=t.getRoot(),x=i.scry(w,'#SuggestBelowInvite')[0];if(x)new g('/ajax/pages/reminder/recommendations').send();var y=t.hide.bind(t);this.$ReminderStory1=new n();this.$ReminderStory1.addSubscriptions(j.listen(window,'resize',y),j.listen(window,'scroll',y));var z=i.scry(w,'.inlineReplyTextArea');z[0]&&z[0].focus();var aa=i.scry(w,'.jewelItemNew'),ba=[];for(var ca in aa){var da=aa[ca].getAttribute('id');if(da&&p(da,'_1_req'))ba=ba.concat(da.replace('_1_req',''));}if(ba.length>0)new g('/friends/requests/log_impressions').setData({ids:ba.join(','),ref:'reminder_box'}).send();var ea=m.getInstance(i.scry(t.getRoot(),'.uiScrollableArea')[0]),fa=k.getInstance(i.scry(t.getRoot(),'.flexibleScrollableArea')[0]),ga=function(){if(fa)fa.poke();if(ea){ea.poke();j.fire(i.scry(t.getRoot(),'.scrollable')[0],'scroll');}};ga();h.subscribe('reflow',function(){var ha=i.scry(w,'.fbRemindersBirthdayList');if(z&&ha)for(var ia=0;ia<z.length;++ia)if(z[ia]==q()&&i.contains(ha[0],z[ia]))ga();});}.bind(this));t.subscribe('beforehide',function(){if(this.$ReminderStory1){this.$ReminderStory1.release();this.$ReminderStory1=null;}}.bind(this));}e.exports=r;},null);
__d("XBirthdayMessagePostControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/reminders\/birthday\/message\/",{});},null);