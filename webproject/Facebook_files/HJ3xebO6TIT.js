/*!CK:3914483356!*//*1401163026,178187583*/

if (self.CavalryLogger) { CavalryLogger.start_js(["93skx"]); }

__d("XFeedInfiniteHscrollControllerURIBuilder",["XControllerURIBuilder"],function(a,b,c,d,e,f,g){e.exports=g.create("\/feed\/infinite_hscroll\/",{ad_index_offset:{type:"Int",required:true},cursor:{type:"String"},requested_ad_type:{type:"Enum",required:true},scroll_body_id:{type:"String"},loading_card_id:{type:"String"},serialized_context:{type:"String"},story_type:{type:"Int",required:true}});},null);
__d("InfiniteHScrollExtension",["Arbiter","AsyncRequest","CSS","DOM","LoadingIndicator.react","React","XFeedInfiniteHscrollControllerURIBuilder","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(p,q,r,s){"use strict";this.$InfiniteHScrollExtension0=p;this.$InfiniteHScrollExtension1=q;this.$InfiniteHScrollExtension2=r;this.$InfiniteHScrollExtension3=s;this.$InfiniteHScrollExtension4=null;this.$InfiniteHScrollExtension5=false;}o.prototype.init=function(p){"use strict";this.$InfiniteHScrollExtension6=p;this.$InfiniteHScrollExtension6.getArbiter().subscribe('onBeforeTransition',this.$InfiniteHScrollExtension7.bind(this),g.SUBSCRIBE_NEW);g.subscribe('DesktopInfiniteHscroll/newOffscreenItems',this.$InfiniteHScrollExtension8.bind(this),g.SUBSCRIBE_NEW);};o.prototype.initPager=function(p,q){"use strict";this.$InfiniteHScrollExtension6=p;this.$InfiniteHScrollExtension9=q;this.$InfiniteHScrollExtensiona=j.create('div',{'class':'hidden_elem lfloat'});j.insertBefore(this.$InfiniteHScrollExtension9.getRoot(),this.$InfiniteHScrollExtensiona);l.renderComponent(k({size:"small",color:"white",className:"_440x"}),this.$InfiniteHScrollExtensiona);q.subscribe('next',this.$InfiniteHScrollExtensionb.bind(this));q.subscribe('prev',this.$InfiniteHScrollExtension6.scrollPrevious.bind(this.$InfiniteHScrollExtension6));this.$InfiniteHScrollExtension6.getArbiter().subscribe('onShow',function(r,s){this.$InfiniteHScrollExtensionc(s.index);}.bind(this));};o.prototype.getPagerButtons=function(){"use strict";return this.$InfiniteHScrollExtension9;};o.prototype.$InfiniteHScrollExtensionb=function(p,q){"use strict";if(this.$InfiniteHScrollExtension6.getSelectedIndex()+1<this.$InfiniteHScrollExtension6.getNumItems()){this.$InfiniteHScrollExtension6.scrollNext();}else{this.$InfiniteHScrollExtension5=true;this.$InfiniteHScrollExtension9.setNextEnabled(false);i.show(this.$InfiniteHScrollExtensiona);this.$InfiniteHScrollExtensiond();}};o.prototype.$InfiniteHScrollExtensionc=function(p){"use strict";this.$InfiniteHScrollExtension9.setPrevEnabled(p>0);this.$InfiniteHScrollExtension9.setNextEnabled(!this.$InfiniteHScrollExtension5||p<this.$InfiniteHScrollExtension6.getNumItems()-1);};o.prototype.$InfiniteHScrollExtension7=function(p,q){"use strict";this.$InfiniteHScrollExtension5=false;i.hide(this.$InfiniteHScrollExtensiona);this.fetchAdditionalAdsIfNecessary();};o.prototype.fetchAdditionalAdsIfNecessary=function(){"use strict";var p=this.$InfiniteHScrollExtension6.getNumItems()-this.$InfiniteHScrollExtension6.getSelectedIndex()-1;if(p>this.$InfiniteHScrollExtension3)return;this.$InfiniteHScrollExtensiond();};o.prototype.$InfiniteHScrollExtensiond=function(){"use strict";if(this.$InfiniteHScrollExtensione)return;this.$InfiniteHScrollExtensione=true;var p=new m().setString('serialized_context',this.$InfiniteHScrollExtension2).setEnum('requested_ad_type',this.$InfiniteHScrollExtension1).setString('scroll_body_id',this.$InfiniteHScrollExtensionf()).setInt('story_type',this.$InfiniteHScrollExtension0).setInt('ad_index_offset',this.$InfiniteHScrollExtension6.getNumItems()).setString('cursor',this.$InfiniteHScrollExtension4);new h().setURI(p.getURI()).setHandler(function(q){this.$InfiniteHScrollExtension4=q.payload.cursor;this.$InfiniteHScrollExtensione=false;i.hide(this.$InfiniteHScrollExtensiona);this.$InfiniteHScrollExtensionc(this.$InfiniteHScrollExtension6.getSelectedIndex());}.bind(this)).setErrorHandler(function(q){}.bind(this)).send();};o.prototype.$InfiniteHScrollExtension8=function(p,q){"use strict";if(q.unitID!==this.$InfiniteHScrollExtensionf())return;this.$InfiniteHScrollExtension6.addOffscreenItems(q.renderedItems);if(this.$InfiniteHScrollExtension5)this.$InfiniteHScrollExtension6.scrollNext();};o.prototype.$InfiniteHScrollExtensionf=function(){"use strict";return this.$InfiniteHScrollExtension6.getID();};e.exports=o;},null);
__d("PadMessageOnAnimateExtension",["Arbiter","CSS","DOM","DOMQuery","PixelNumConverter","Style","csx","getStyleProperty","queryThenMutateDOM"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){var p="div._5pbx",q="div._329q",r="div._6m2";function s(){"use strict";}s.prototype.init=function(t){"use strict";this.$PadMessageOnAnimateExtension0=t;this.$PadMessageOnAnimateExtension0.getArbiter().subscribe('onAnimate',this.$PadMessageOnAnimateExtension1.bind(this),g.SUBSCRIBE_NEW);};s.prototype.$PadMessageOnAnimateExtension1=function(t,u){"use strict";var v=j.scry(u.item.ad,p)[0];if(!v)return;var w=j.scry(u.item.ad,q)[0]||j.scry(u.item.ad,r)[0];if(!w)return;var x=j.scry(u.item.ad,"div._5pbx .text_exposed_root")[0],y,z,aa,ba;o(function(){y=k.numValue(n(this.$PadMessageOnAnimateExtension0.getAdContainer(),'padding-bottom'));aa=this.$PadMessageOnAnimateExtension0.getAdContainer().offsetHeight;z=v.offsetHeight;ba=u.item.ad.offsetHeight;}.bind(this),function(){var ca=aa-y-ba;if(x&&!h.hasClass(x,'text_exposed')){h.addClass(x,'text_exposed');var da=v.offsetHeight-z;if(da<=ca){ca-=da;this.$PadMessageOnAnimateExtension2(x);}else h.removeClass(x,'text_exposed');}l.set(v,'min-height',k.pixelValue(z+ca));}.bind(this));};s.prototype.$PadMessageOnAnimateExtension2=function(t){"use strict";j.scry(t,'.text_exposed_hide').forEach(function(u){i.remove(u);});j.scry(t,'.text_exposed_link').forEach(function(u){i.remove(u);});j.scry(t,'.text_exposed_show').forEach(function(u){i.replace(u,u.childNodes);});h.removeClass(t,'text_exposed_root');h.removeClass(t,'text_exposed');};e.exports=s;},null);
__d("PageLikeAdScrollOnLikeExtension",["Arbiter","Button","PageLikeButton"],function(a,b,c,d,e,f,g,h,i){var j=750;function k(){"use strict";}k.prototype.init=function(l){"use strict";this.$PageLikeAdScrollOnLikeExtension0=l;var m=this.$PageLikeAdScrollOnLikeExtension0.getPager().getPagerButtons().getRoot().childNodes;this.$PageLikeAdScrollOnLikeExtension1=m[m.length-1];g.subscribe(i.LIKED,this.$PageLikeAdScrollOnLikeExtension2.bind(this),g.SUBSCRIBE_NEW);};k.prototype.$PageLikeAdScrollOnLikeExtension2=function(l,m){"use strict";var n=this.$PageLikeAdScrollOnLikeExtension0.getSelectedItem().ad.getAttribute('data-oid');if(m.profile_id!=n||!h.isEnabled(this.$PageLikeAdScrollOnLikeExtension1))return;var o=this.$PageLikeAdScrollOnLikeExtension0.getPager();o.fetchAdditionalAdsIfNecessary&&o.fetchAdditionalAdsIfNecessary();setTimeout(function(){h.setDepressed(this.$PageLikeAdScrollOnLikeExtension1,true);}.bind(this),j/2);setTimeout(function(){h.setDepressed(this.$PageLikeAdScrollOnLikeExtension1,false);this.$PageLikeAdScrollOnLikeExtension0.getPager().getPagerButtons().inform('next');}.bind(this),j);};e.exports=k;},null);
__d("EntstreamPagerSubstoryViewer",["CSS","DOM","Locale","Style","copyProperties","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(o,p){this.substoryIndex=0;this.substories=h.scry(o,"._2d-_");this.positioner=h.find(o,"._2d_0");this.horizontalMargin=i.isRTL()?'margin-right':'margin-left';p.subscribe('prev',function(){if(this.substoryIndex>0){this.updateCurrentSubstory(-1);if(this.substoryIndex===0)p.setPrevEnabled(false);if(this.substoryIndex==this.substories.length-2)p.setNextEnabled(true);}}.bind(this));p.subscribe('next',function(){if(this.substoryIndex<this.substories.length-1){this.updateCurrentSubstory(1);if(this.substoryIndex==this.substories.length-1)p.setNextEnabled(false);if(this.substoryIndex==1)p.setPrevEnabled(true);}}.bind(this));}k(n.prototype,{updateCurrentSubstory:function(o){g.removeClass(this.substories[this.substoryIndex],"_2d--");this.substoryIndex=this.substoryIndex+o;g.addClass(this.substories[this.substoryIndex],"_2d--");j.set(this.positioner,this.horizontalMargin,(this.substoryIndex*-100)+'%');}});e.exports=n;},null);
__d("PagerButtons",["ArbiterMixin","Button","DOMQuery","Event","mixin"],function(a,b,c,d,e,f,g,h,i,j,k){var l=k(g);for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q,r){"use strict";this._prev=q;this._next=r;j.listen(p,'click',this._handleClick.bind(this));this._root=p;}o.prototype._handleClick=function(p){"use strict";var q=p.getTarget();if(i.contains(this._prev,q)){if(h.isEnabled(this._prev))this.inform('prev',this._prev);}else if(i.contains(this._next,q))if(h.isEnabled(this._next))this.inform('next',this._next);};o.prototype.setPrevEnabled=function(p){"use strict";h.setEnabled(this._prev,p);return this;};o.prototype.setNextEnabled=function(p){"use strict";h.setEnabled(this._next,p);return this;};o.prototype.getRoot=function(){"use strict";return this._root;};e.exports=o;},null);