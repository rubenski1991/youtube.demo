/*!CK:1845562501!*//*1401158231,178142541*/

if (self.CavalryLogger) { CavalryLogger.start_js(["E5dwV"]); }

__d("AbstractRangeInput.react",["Event","React","UserAgent","cx"],function(a,b,c,d,e,f,g,h,i,j){var k={BLOCK:'block',PUSH:'push',FREE:'free'},l=h.createClass({displayName:'AbstractRangeInput',propTypes:{name:h.PropTypes.string,min:h.PropTypes.number,max:h.PropTypes.number,step:h.PropTypes.number,disabled:h.PropTypes.bool,values:h.PropTypes.array,behavior:h.PropTypes.oneOf([k.BLOCK,k.PUSH,k.FREE]),onChange:h.PropTypes.func},getDefaultProps:function(){return {name:'',min:0,max:1,step:.01,disabled:false,values:[.5],behavior:k.FREE};},componentWillReceiveProps:function(m){this.setState({values:m.values});},componentWillUnmount:function(){for(var m in this._listeners){this._listeners[m]&&this._listeners[m].remove();this._listeners[m]=null;}},getInitialState:function(){var m=i.ie()<9?document.documentElement:window;this._listeners=g.listen(m,{selectstart:function(o){this.state.draggingIdx!==null&&g.prevent(o);}.bind(this),mousemove:this._onMouseMove,mouseup:this._onMouseUp});var n=this.props.values;if(this.props.behavior!==k.FREE)n.sort();return {values:n,draggingIdx:null};},_onMouseDown:function(event){g.prevent(event);var m=parseInt(event.target.getAttribute('data-value'),10);this.setState({draggingIdx:m,dragStartValue:this.state.values[m],dragStartX:event.nativeEvent.clientX,scale:event.nativeEvent.getTarget().parentNode.clientWidth});},_onMouseMove:function(event){if(this.state.draggingIdx!==null){var m=(event.clientX-this.state.dragStartX),n=(this.props.max-this.props.min)/this.state.scale,o=this.state.dragStartValue+(m*n),p=this.state.values,q=p.length,r=this.state.draggingIdx;if(this.props.step){var s=1/this.props.step;o=Math.round(o*s)/s;}var t=this.props.min,u=this.props.max;if(this.props.behavior===k.BLOCK){t=r>0?p[r-1]:t;u=r<q-1?p[r+1]:u;}o=o<t?t:o;o=o>u?u:o;p[r]=o;if(this.props.behavior===k.PUSH){for(var v=r+1,w=p.length;v<w;v++){if(p[v]>=o)break;p[v]=o;}for(v=r-1;v>=0;v--){if(p[v]<=o)break;p[v]=o;}}this.setState({values:p});this.props.onChange&&this.props.onChange(p);}},_onMouseUp:function(event){if(this.state.draggingIdx!==null)this.setState({draggingIdx:null});},render:function(){var m=this.state.values,n=this.props.max-this.props.min,o=[];for(var p=0,q=m.length;p<q;p++){var r=(m[p]-this.props.min)/n,s=this.props.name+(q>1?'['+p+']':'');o.push(h.DOM.div({className:(("_4qwr")+(this.props.disabled?' '+"_4qws":'')),'data-value':p,key:'thumb-'+p,onDragStart:g.prevent,onMouseDown:this.props.disabled?null:this._onMouseDown,style:{left:(r*100)+'%'}},h.DOM.input({onChange:this.props.onChange,name:s,value:m[p],type:"hidden"})));}return this.transferPropsTo(h.DOM.div({className:"_4qwt"},h.DOM.div({className:"_4qwu"}),o));}});e.exports=l;},null);